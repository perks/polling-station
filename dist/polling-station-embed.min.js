/*!
 * polling-station
 * 
 * 
 * @author Chris Evans
 * @version 0.0.1
 * Copyright 2014. MIT licensed.
 */
!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[a]=b()}("domready",function(){var a,b=[],c=document,d="DOMContentLoaded",e=/^loaded|^i|^c/.test(c.readyState);return e||c.addEventListener(d,a=function(){for(c.removeEventListener(d,a),e=1;a=b.shift();)a()}),function(a){e?a():b.push(a)}}),function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}(),function(){function a(a){function b(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function c(a){var c;return c=h.dataset?h.dataset[b(a)]:h.getAttribute("data-"+a)}function d(a){var b=document.createElement("link");b.setAttribute("type","text/css"),b.setAttribute("rel","stylesheet"),b.setAttribute("href",a),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(b)}function e(a,b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a),c.readyState?c.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&b()}:c.onload=b,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(c)}function f(){var a=c("url")||"",b=c("base")||"./",f=c("localStorage")||!1,h=b+c("css")||b+"assets/css/default.css",i=b+c("lib")||b+"dist/polling-station-min.js",j=parseInt(c("poll-id"),10)||1;h&&d(h),e(i,g.bind(null,a,f,j,b))}function g(a,b,c,d){domready(function(){var e=tmpl("yesno_tmpl"),f=new PollingStation({localStorage:b,url:a,id:c,base:d,dev:!0,template:e.bind(this)}),g=function(a){for(var b=document.getElementById("poll-answers").querySelectorAll("img"),c=0;c<b.length;c++)b[c].src=a+"assets/img/"+b[c].src.substr(b[c].src.lastIndexOf("/")+1)};f.init([g.bind(null,d)])})}var h=document.getElementById("polling-station-script"),i=(h.parentNode,document.head||document.getElementsByTagName("head")[0],Object.prototype.hasOwnProperty,document.createElement("script"));i.type="text/html",i.id="yesno_tmpl",i.innerHTML=a,document.body.appendChild(i);var j=document.createElement("div");j.id="polling-station",h.parentNode.insertBefore(j,h),f()}var b=new XMLHttpRequest,c=document.getElementById("polling-station-script").getAttribute("data-base")||"./";b.open("GET",c+"assets/templates/yes-no.tmpl",!0),b.onload=function(){if(b.status>=200&&b.status<400){var c=b.responseText;a(c)}else console.log("Server reached, error loading template though")},b.onerror=function(){console.log("Error fetching template")},b.send()}();